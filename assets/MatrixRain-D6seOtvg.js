import{a as r,j as o,A as y,m as p}from"./framer-motion-DjJR-6Ks.js";const g="アイウエオカキクケコサシスセソタチツテト01234567890#$%&@ぷろきぃ";function E(){const[s,v]=r.useState(!1),d=r.useRef(null);return r.useRef(null),r.useEffect(()=>{const e=t=>{t.target.tagName==="INPUT"||t.target.tagName==="TEXTAREA"||t.target.isContentEditable||(t.key==="r"||t.key==="R")&&!t.ctrlKey&&!t.metaKey&&!t.altKey&&v(n=>!n)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),r.useEffect(()=>{if(!s)return;const e=d.current;if(!e)return;const t=e.getContext("2d"),n=14;let l,i;const c=()=>{e.width=window.innerWidth,e.height=window.innerHeight,l=Math.floor(e.width/n),i=Array.from({length:l},()=>Math.random()*-100)};c(),window.addEventListener("resize",c);let m=getComputedStyle(document.documentElement).getPropertyValue("--c-accent").trim()||"#4facfe";const u=new MutationObserver(()=>{m=getComputedStyle(document.documentElement).getPropertyValue("--c-accent").trim()||"#4facfe"});u.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]});const w=50;let f=null;return f=setInterval(()=>{t.fillStyle="rgba(6, 8, 15, 0.06)",t.fillRect(0,0,e.width,e.height),t.font=`${n}px monospace`;for(let a=0;a<l;a++){const x=g[Math.floor(Math.random()*g.length)],h=i[a]*n;t.fillStyle=m,t.globalAlpha=Math.random()>.3?.9:.3,t.fillText(x,a*n,h),t.globalAlpha=1,h>e.height&&Math.random()>.975&&(i[a]=0),i[a]++}},w),()=>{clearInterval(f),window.removeEventListener("resize",c),u.disconnect()}},[s]),o.jsx(y,{children:s&&o.jsxs(p.div,{className:"matrix-rain",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[o.jsx("canvas",{ref:d,className:"matrix-rain__canvas"}),o.jsx("div",{className:"matrix-rain__hint",children:"Press R to exit"})]})})}const M=r.memo(E);export{M as default};
