import{a as n,j as e,m as w}from"./framer-motion-DjJR-6Ks.js";const v="ABCDEFGHIJKLMNOPQRSTUVWXYZ",f=[{id:0,icon:"ğŸ“¦",label:"ALPHA",shift:[3,7,1],sender:"NetRunner_0x7F",trust:92,message:`The payload is hidden in /dev/null.
Access code: prokyi-539.
Do not trust the corporate nodes.`},{id:1,icon:"ğŸ’€",label:"BRAVO",shift:[5,2,8],sender:"GhostSec",trust:67,message:`Firewall breach at sector 7G.
All agents compromised.
Evacuate to darknet relay #4.`},{id:2,icon:"ğŸ”‘",label:"CHARLIE",shift:[9,4,6],sender:"CipherPunk",trust:88,message:`Encryption keys rotated.
New hash: SHA-539.
Sushi is the universal password.`},{id:3,icon:"ğŸ“¡",label:"DELTA",shift:[2,11,3],sender:"SatLink",trust:45,message:`Satellite uplink established.
Bandwidth: unlimited.
Streaming prokyi consciousness to the cloud.`},{id:4,icon:"ğŸ§¬",label:"ECHO",shift:[7,0,5],sender:"BioHacker",trust:78,message:`DNA sequence modified.
Cybernetic implant v2.6 online.
Side effect: craves sushi 24/7.`}];function N(i,u){let d=0;return i.split("").map(l=>{const r=v.indexOf(l.toUpperCase());if(r<0)return l;const m=u[d%u.length];d++;const p=v[(r+m)%26];return l===l.toLowerCase()?p.toLowerCase():p}).join("")}const b=[15,17,14,10,24,8];function S(){const[i,u]=n.useState(!1),[d,l]=n.useState([0,0,0]),[r,m]=n.useState(null),[p,E]=n.useState(new Set),[_,g]=n.useState(!1),x=n.useRef(null);n.useEffect(()=>{const s=a=>{a.key==="Escape"&&i&&u(!1)},t=()=>u(a=>!a);return window.addEventListener("keydown",s),window.addEventListener("prokyi-deaddrop-toggle",t),()=>{window.removeEventListener("keydown",s),window.removeEventListener("prokyi-deaddrop-toggle",t)}},[i]),n.useEffect(()=>()=>clearTimeout(x.current),[]),n.useEffect(()=>{i||(l([0,0,0]),m(null),E(new Set),g(!1),clearTimeout(x.current))},[i]);const D=n.useCallback((s,t)=>{l(a=>{const c=[...a];return c[s]=(c[s]+t+26)%26,c})},[]),C=n.useCallback(s=>{m(s),l([0,0,0])},[]),k=n.useCallback(()=>{if(r===null)return;const s=f[r];d[0]===s.shift[0]&&d[1]===s.shift[1]&&d[2]===s.shift[2]&&E(a=>{if(a.has(r))return a;const c=new Set(a);return c.add(r),c})},[r,d]);if(n.useEffect(()=>{!i||_||d[0]===b[0]&&d[1]===b[1]&&d[2]===b[2]&&(g(!0),x.current=setTimeout(()=>g(!1),5e3))},[d,i,_]),!i)return null;const o=r!==null?f[r]:null,h=r!==null&&p.has(r),y=o?h?o.message:N(o.message,o.shift):"Select a capsule to begin decryption...";let j=0;if(o){const s=o.shift.reduce((t,a,c)=>t+(d[c]===a?1:0),0);j=Math.round(s/3*100)}return e.jsxs(w.div,{className:"dead-drop",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Dead Drop","aria-modal":"true",children:[e.jsxs("div",{className:"dead-drop__header",children:[e.jsx("span",{children:"ğŸ“¦ DEAD DROP"}),e.jsx("button",{className:"dead-drop__btn",onClick:()=>u(!1),"aria-label":"Close",children:"âœ•"})]}),e.jsx("div",{className:"dead-drop__capsules",children:f.map((s,t)=>e.jsxs("div",{className:`dead-drop__capsule${r===t?" dead-drop__capsule--active":""}${p.has(t)?" dead-drop__capsule--decoded":""}`,onClick:()=>C(t),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),C(t))},role:"button",tabIndex:0,children:[s.icon," ",s.label]},s.id))}),e.jsxs("div",{className:"dead-drop__cipher",children:[d.map((s,t)=>e.jsxs("div",{className:"dead-drop__ring",children:[e.jsx("button",{className:"dead-drop__ring-btn",onClick:()=>D(t,1),"aria-label":`Ring ${t+1} up`,children:"â–²"}),e.jsx("div",{className:"dead-drop__ring-display",children:v[s]}),e.jsx("button",{className:"dead-drop__ring-btn",onClick:()=>D(t,-1),"aria-label":`Ring ${t+1} down`,children:"â–¼"})]},t)),e.jsx("button",{className:"dead-drop__btn",onClick:k,style:{alignSelf:"center",marginLeft:8},children:"DECODE"})]}),e.jsx("div",{className:"dead-drop__progress",children:e.jsx("div",{className:"dead-drop__progress-bar",style:{width:`${h?100:j}%`}})}),e.jsx("div",{className:`dead-drop__message${h?" dead-drop__message--decoded":""}`,children:y}),h&&o&&e.jsxs("div",{className:"dead-drop__sender",children:["FROM: ",o.sender," | TRUST: ",o.trust,"% | DECODED: ",p.size,"/",f.length]}),e.jsx("div",{className:"dead-drop__status",children:h?"âœ… Message decoded.":o?"Hint: set rings to correct shift values (0-25)":"Choose a capsule above"}),_&&e.jsxs("div",{className:"dead-drop__omega",children:[e.jsx("h2",{children:"DEAD DROP OMEGA"}),e.jsxs("p",{children:["ã·ã‚ããƒã®éºè¨€:",e.jsx("br",{}),"ã€Œã‚³ãƒ¼ãƒ‰ã¯æ°¸é ã«ã€å¯¿å¸ã‚‚æ°¸é ã«ã€‚ã€"]})]})]})}const R=n.memo(S);export{R as default};
