import{a as n,j as s}from"./framer-motion-DjJR-6Ks.js";const E=[{freq:88.1,msg:"ã·ã‚ããƒ â€” åƒè‘‰åœ¨ä½ã€ZENå¤§å­¦1æœŸç”Ÿã€AI/DSã®é“ã¸"},{freq:91.7,msg:"å¯¿å¸å±‹ã®ã‚­ãƒƒãƒãƒ³ã§é›ãˆãŸå¿è€åŠ›ãŒã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«æ´»ãã¦ã„ã‚‹"},{freq:96.3,msg:"åº§æ¨™: 35.6095Â°N, 140.1233Â°E â€” åƒè‘‰å¸‚æŸæ‰€ã‚ˆã‚Šç™ºä¿¡ä¸­"},{freq:100.5,msg:"æ¨ã—ã‚¹ã‚¿ãƒƒã‚¯: Python + React + Docker + Linux"},{freq:103.5,msg:"AYN Thor MAX ã§é€šå­¦ä¸­ã‚‚ã‚²ãƒ¼ãƒ ä¸‰æ˜§"}],h=87,R=108,L=.4;function C(){const[u,d]=n.useState(!1),[i,w]=n.useState(87),[g,q]=n.useState(()=>{try{return new Set(JSON.parse(localStorage.getItem("prokyi_signal_found")||"[]"))}catch{return new Set}}),p=n.useRef(null),c=n.useRef(null),r=E.find(t=>Math.abs(t.freq-i)<L),_=n.useRef(g);_.current=g,n.useEffect(()=>{r&&!_.current.has(r.freq)&&q(t=>{const e=new Set(t);return e.add(r.freq),localStorage.setItem("prokyi_signal_found",JSON.stringify([...e])),e})},[r]),n.useEffect(()=>{const t=e=>{e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.isContentEditable||(e.key==="s"||e.key==="S")&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey&&d(a=>!a)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),n.useEffect(()=>{const t=()=>d(e=>!e);return window.addEventListener("prokyi-signal-toggle",t),()=>window.removeEventListener("prokyi-signal-toggle",t)},[]);const N=n.useRef(i);N.current=i;const S=n.useRef(r);S.current=r,n.useEffect(()=>{if(!u){cancelAnimationFrame(c.current);return}const t=p.current;if(!t)return;const e=t.getContext("2d"),a=window.devicePixelRatio||1,l=t.offsetWidth,f=t.offsetHeight;t.width=l*a,t.height=f*a,e.setTransform(a,0,0,a,0,0);const x=k=>{const T=k*.001;e.clearRect(0,0,l,f),e.lineWidth=1;const m=!!S.current,j=m?3:12,F=m?15:0;e.strokeStyle=m?"#00ff41":"#444",e.beginPath();for(let o=0;o<l;o++){const I=(Math.random()-.5)*j,b=Math.sin(o*.05+T*3)*F,y=f/2+b+I;o===0?e.moveTo(o,y):e.lineTo(o,y)}e.stroke();const v=(N.current-h)/(R-h)*l;e.strokeStyle="rgba(0, 229, 255, 0.4)",e.setLineDash([3,3]),e.beginPath(),e.moveTo(v,0),e.lineTo(v,f),e.stroke(),e.setLineDash([]),c.current=requestAnimationFrame(x)};return c.current=requestAnimationFrame(x),()=>cancelAnimationFrame(c.current)},[u]);const A=n.useCallback(t=>{w(parseFloat(t.target.value))},[]);return u?s.jsxs("div",{className:"signal-interceptor",role:"dialog","aria-label":"Signal Interceptor","aria-modal":"true",children:[s.jsxs("div",{className:"signal-interceptor__header",children:[s.jsx("span",{children:"ğŸ“¡ SIGNAL INTERCEPTOR"}),s.jsx("button",{className:"signal-interceptor__close",onClick:()=>d(!1),"aria-label":"Close",children:"âœ•"})]}),s.jsx("div",{className:"signal-interceptor__wave-container",children:s.jsx("canvas",{ref:p})}),s.jsxs("div",{className:"signal-interceptor__controls",children:[s.jsx("span",{className:"signal-interceptor__freq",children:i.toFixed(1)}),s.jsx("input",{type:"range",className:"signal-interceptor__slider",min:h,max:R,step:.1,value:i,onChange:A,"aria-label":"å‘¨æ³¢æ•°ãƒãƒ¥ãƒ¼ãƒŠãƒ¼"}),s.jsx("span",{style:{fontSize:"0.45rem",color:"#555"},children:"MHz"})]}),s.jsx("div",{className:`signal-interceptor__message${r?" signal-interceptor__message--active":" signal-interceptor__message--noise"}`,children:r?`â–¸ ${r.msg}`:"â–¸ Â·Â·Â· NO SIGNAL Â·Â·Â· static noise Â·Â·Â·"}),s.jsxs("div",{className:"signal-interceptor__found",children:["STATIONS: ",g.size,"/",E.length]})]}):null}const P=n.memo(C);export{P as default};
