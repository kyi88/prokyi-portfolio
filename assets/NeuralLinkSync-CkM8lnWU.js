import{a as t,j as s,m as j}from"./framer-motion-DjJR-6Ks.js";const y=[{name:"Î±",color:"#0ff"},{name:"Î²",color:"#f0f"},{name:"Î³",color:"#0f0"},{name:"Î´",color:"#ff0"}];function M(){const[l,u]=t.useState(!1),[x,i]=t.useState(87.3),[r,f]=t.useState(!1),[w,_]=t.useState("SYNC STABLE"),N=t.useRef(null),c=t.useRef(null),m=t.useRef(0),d=t.useRef(null),k=t.useRef(null);t.useEffect(()=>{const e=a=>{a.key==="Escape"&&l&&u(!1)},n=()=>u(a=>!a);return window.addEventListener("keydown",e),window.addEventListener("prokyi-neurallink-toggle",n),()=>{window.removeEventListener("keydown",e),window.removeEventListener("prokyi-neurallink-toggle",n)}},[l]),t.useEffect(()=>{if(!l||r)return;const e=setInterval(()=>{i(n=>{const a=(Math.random()-.5)*2.4;return Math.max(60,Math.min(99.9,n+a))})},1500);return()=>clearInterval(e)},[l,r]),t.useEffect(()=>{if(r){_("âš  BERSERK MODE â€” PILOT OVERRIDE FAILED");return}const e=["SYNC STABLE","SIGNAL DRIFT","CALIBRATING...","OVERCLOCKED"],n=setInterval(()=>{_(e[Math.floor(Math.random()*e.length)])},5e3);return()=>clearInterval(n)},[r]),t.useEffect(()=>{if(!l){cancelAnimationFrame(c.current);return}const e=N.current;if(!e)return;const n=e.getContext("2d"),a=window.devicePixelRatio||1,h=e.offsetWidth,E=e.offsetHeight;e.width=h*a,e.height=E*a,n.setTransform(a,0,0,a,0,0);const p=L=>{const S=L*.001;n.clearRect(0,0,h,E),y.forEach((T,v)=>{n.strokeStyle=T.color,n.lineWidth=1,n.globalAlpha=.7;const A=(v+.5)*(E/y.length);n.beginPath();for(let o=0;o<h;o++){const g=.03+v*.015,C=r?15+Math.random()*10:6+Math.sin(S*.5)*2,I=(Math.random()-.5)*(r?8:2),b=A+Math.sin(o*g+S*(2+v*.8))*C+I;o===0?n.moveTo(o,b):n.lineTo(o,b)}n.stroke()}),n.globalAlpha=1,c.current=requestAnimationFrame(p)};return c.current=requestAnimationFrame(p),()=>cancelAnimationFrame(c.current)},[l,r]);const R=t.useCallback(()=>{m.current++,clearTimeout(d.current),d.current=setTimeout(()=>{m.current=0},1500),m.current>=5&&!r&&(f(!0),i(400),clearTimeout(k.current),k.current=setTimeout(()=>{f(!1),i(87.3)},5e3))},[r]);return t.useEffect(()=>()=>{clearTimeout(d.current),clearTimeout(k.current)},[]),t.useEffect(()=>{l||(cancelAnimationFrame(c.current),f(!1),i(87.3))},[l]),l?s.jsxs(j.div,{className:"neural-link",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Neural Link Sync Monitor","aria-modal":"true",children:[s.jsxs("div",{className:"neural-link__header",children:[s.jsx("span",{children:"ðŸ§  NEURAL LINK v3.1"}),s.jsx("button",{className:"neural-link__btn",onClick:()=>u(!1),"aria-label":"Close",children:"âœ•"})]}),s.jsx("canvas",{ref:N,className:"neural-link__wave"}),s.jsxs("div",{className:`neural-link__sync${r?" neural-link__sync--berserk":""}`,onClick:R,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),R())},role:"button",tabIndex:0,"aria-label":`Sync rate ${x.toFixed(1)}%`,children:[x.toFixed(1),"%"]}),s.jsx("div",{className:`neural-link__status${r?" neural-link__status--berserk":""}`,children:w}),s.jsx("div",{className:"neural-link__channels",children:y.map(e=>s.jsxs("div",{className:"neural-link__ch",children:[s.jsx("span",{className:"neural-link__ch-dot",style:{background:e.color}}),e.name,"æ³¢"]},e.name))})]}):null}const D=t.memo(M);export{D as default};
