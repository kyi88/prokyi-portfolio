import{a as s,j as l,A as h,m as f}from"./framer-motion-DjJR-6Ks.js";const y=[{id:"profile",label:"01 — 基本情報",target:"#profile"},{id:"career",label:"02 — 学歴・経歴",target:"#career"},{id:"goals",label:"03 — 今後の目標",target:"#goals"},{id:"status",label:"04 — プレイヤーステータス",target:"#status"},{id:"gadgets",label:"05 — ガジェット",target:"#gadgets"},{id:"links",label:"06 — リンク / SNS",target:"#links"},{id:"top",label:"▲  トップへ戻る",target:"#top"}];function b(){const[n,i]=s.useState(!1),[r,p]=s.useState(""),[o,c]=s.useState(0),d=s.useRef(null),a=y.filter(e=>e.label.toLowerCase().includes(r.toLowerCase())||e.id.includes(r.toLowerCase()));s.useEffect(()=>{c(0)},[r]),s.useEffect(()=>{const e=t=>{(t.ctrlKey||t.metaKey)&&t.key==="k"&&(t.preventDefault(),i(g=>!g),p("")),t.key==="Escape"&&n&&i(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]),s.useEffect(()=>{n&&d.current&&d.current.focus()},[n]);const m=e=>{i(!1);const t=document.querySelector(e);t&&t.scrollIntoView({behavior:"smooth"})},u=e=>{if(e.key==="ArrowDown"){if(e.preventDefault(),a.length===0)return;c(t=>(t+1)%a.length)}else if(e.key==="ArrowUp"){if(e.preventDefault(),a.length===0)return;c(t=>(t-1+a.length)%a.length)}else e.key==="Enter"&&a.length>0?m(a[o].target):e.key==="Tab"&&e.preventDefault()};return l.jsx(h,{children:n&&l.jsx(f.div,{className:"cmd-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),children:l.jsxs(f.div,{className:"cmd-panel",role:"dialog","aria-modal":"true","aria-label":"コマンドパレット",initial:{scale:.9,y:-20},animate:{scale:1,y:0},exit:{scale:.9,y:-20},transition:{type:"spring",stiffness:400,damping:30},onClick:e=>e.stopPropagation(),children:[l.jsxs("div",{className:"cmd-panel__input-wrap",children:[l.jsx("span",{className:"cmd-panel__icon",children:"▸"}),l.jsx("input",{ref:d,className:"cmd-panel__input",value:r,onChange:e=>p(e.target.value),onKeyDown:u,placeholder:"セクションへジャンプ...",autoComplete:"off",spellCheck:"false",role:"combobox","aria-expanded":"true","aria-controls":"cmd-panel-listbox","aria-activedescendant":a.length>0?`cmd-opt-${o}`:void 0}),l.jsx("kbd",{className:"cmd-panel__kbd",children:"Esc"})]}),l.jsxs("ul",{className:"cmd-panel__list",role:"listbox",id:"cmd-panel-listbox",children:[a.map((e,t)=>l.jsx("li",{id:`cmd-opt-${t}`,role:"option","aria-selected":o===t,className:`cmd-panel__item ${o===t?"cmd-panel__item--active":""}`,onClick:()=>m(e.target),children:e.label},e.id)),a.length===0&&l.jsx("li",{className:"cmd-panel__empty",children:"一致するセクションがありません"})]})]})})})}export{b as default};
