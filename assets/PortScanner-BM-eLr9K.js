import{a as e,j as t,m as _}from"./framer-motion-DjJR-6Ks.js";const c=[{port:22,proto:"tcp",service:"ssh",info:"Shell: zsh + starship — WSL2 Ubuntu"},{port:80,proto:"tcp",service:"http",info:"ポートフォリオ: React 19 + Vite 6"},{port:443,proto:"tcp",service:"https",info:"TLS証明書: GitHub Pages 発行"},{port:539,proto:"tcp",service:"prokyi",info:"好きな数字。名前の由来にも関係"},{port:3e3,proto:"tcp",service:"dev-server",info:"Vite HMR — 爆速ビルド中"},{port:5432,proto:"tcp",service:"postgresql",info:"データ分析用DB (学習中)"},{port:8080,proto:"tcp",service:"proxy",info:"夢をコードに変換するプロキシ"},{port:8888,proto:"tcp",service:"jupyter",info:"AI/DS実験: Python + PyTorch"},{port:1337,proto:"tcp",service:"leet",info:"L33T_M0D3 4CT1V4T3D"},{port:9090,proto:"tcp",service:"monitor",info:"FPS & パフォーマンスモニタ稼働中"}],N=400;function E(){const[o,d]=e.useState(!1),[s,f]=e.useState(!1),[m,i]=e.useState([]),[u,v]=e.useState(0),p=e.useRef(null),l=e.useRef(null);e.useEffect(()=>{const n=a=>{a.key==="Escape"&&o&&d(!1)},r=()=>d(a=>!a);return window.addEventListener("keydown",n),window.addEventListener("prokyi-portscan-toggle",r),()=>{window.removeEventListener("keydown",n),window.removeEventListener("prokyi-portscan-toggle",r)}},[o]),e.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[m]);const h=e.useCallback(()=>{if(s)return;f(!0),v(0),i([{text:`Starting Nmap 7.94 ( https://nmap.org ) at ${new Date().toLocaleTimeString("ja-JP")}`,type:"info"},{text:"Nmap scan report for prokyi.local (10.0.13.37)",type:"info"},{text:"Host is up (0.0015s latency).",type:"info"},{text:"PORT      STATE SERVICE       INFO",type:"info"}]);let n=0;p.current=setInterval(()=>{if(n>=c.length){clearInterval(p.current),f(!1),i(y=>[...y,{text:"",type:"info"},{text:`Nmap done: 1 IP address (1 host up) scanned — ${c.length} open ports`,type:"info"}]);return}const r=c[n],a=`${r.port}/${r.proto}`.padEnd(10),S=r.service.padEnd(14),g=r.port===1337;i(y=>[...y,{text:`${a}open  ${S}${r.info}`,type:g?"leet":"open"}]),n++,v(n)},N)},[s]);if(e.useEffect(()=>()=>clearInterval(p.current),[]),e.useEffect(()=>{o||(clearInterval(p.current),f(!1),i([]),v(0))},[o]),!o)return null;const x=c.length>0?u/c.length*100:0;return t.jsxs(_.div,{className:"port-scanner",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},role:"dialog","aria-label":"Port Scanner","aria-modal":"true",children:[t.jsxs("div",{className:"port-scanner__header",children:[t.jsx("span",{children:"NMAP — PORT SCANNER v7.94"}),t.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[!s&&u===0&&t.jsx("button",{className:"port-scanner__close",onClick:h,"aria-label":"Scan",children:"▶ SCAN"}),t.jsx("button",{className:"port-scanner__close",onClick:()=>d(!1),"aria-label":"Close",children:"✕"})]})]}),s&&t.jsx("div",{className:"port-scanner__progress",children:t.jsx("div",{className:"port-scanner__progress-bar",style:{width:`${x}%`}})}),t.jsxs("div",{className:"port-scanner__body",ref:l,children:[m.map((n,r)=>t.jsx("div",{className:`port-scanner__line port-scanner__line--${n.type}`,children:n.text},r)),!s&&u===0&&t.jsx("div",{className:"port-scanner__line port-scanner__line--info",children:"Press ▶ SCAN to begin port scanning prokyi.local..."})]})]})}const P=e.memo(E);export{P as default};
