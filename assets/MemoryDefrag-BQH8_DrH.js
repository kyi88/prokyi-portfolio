import{a as s,j as e,m as k}from"./framer-motion-DjJR-6Ks.js";const S=16,R=10,_=S*R,c=["profile","career","goals","gadgets","links","system"],x={profile:"Profile",career:"Career",goals:"Goals",gadgets:"Gadgets",links:"Links",system:"System"};function E(){const t=[];for(let n=0;n<_;n++)Math.random()<.6?t.push(c[Math.floor(Math.random()*c.length)]):t.push("free");return t}function M(t){const n=t.filter(o=>o!=="free"),i=_-n.length;return n.sort((o,d)=>c.indexOf(o)-c.indexOf(d)),[...n,...Array(i).fill("free")]}function w(){const[t,n]=s.useState(!1),[i,o]=s.useState(()=>E()),[d,f]=s.useState(!1),[g,u]=s.useState(0),[v,y]=s.useState("FRAGMENTED â€” Ready to optimize"),m=s.useRef(null),p=s.useRef([]);s.useEffect(()=>{const r=l=>{l.key==="Escape"&&t&&n(!1)},a=()=>n(l=>!l);return window.addEventListener("keydown",r),window.addEventListener("prokyi-defrag-toggle",a),()=>{window.removeEventListener("keydown",r),window.removeEventListener("prokyi-defrag-toggle",a)}},[t]),s.useEffect(()=>()=>clearInterval(m.current),[]),s.useEffect(()=>{t||(clearInterval(m.current),o(E()),f(!1),u(0),y("FRAGMENTED â€” Ready to optimize"))},[t]);const N=s.useCallback(()=>{if(d)return;const r=M(i);p.current=r,f(!0),y("DEFRAGMENTING...");let a=0;const l=_;m.current=setInterval(()=>{if(a>=l){clearInterval(m.current),f(!1),u(100),y("MEMORY OPTIMIZED â€” SYSTEM PERFORMANCE +42%");return}o(j=>{const h=[...j];return h[a]=p.current[a],h}),a++,u(Math.round(a/l*100))},40)},[d,i]);return t?e.jsxs(k.div,{className:"memory-defrag",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Memory Defragmenter","aria-modal":"true",children:[e.jsxs("div",{className:"memory-defrag__header",children:[e.jsx("span",{children:"ðŸ’¾ DEFRAG /dev/sda1"}),e.jsxs("div",{style:{display:"flex",gap:6},children:[!d&&g<100&&e.jsx("button",{className:"memory-defrag__btn",onClick:N,children:"â–¶ DEFRAG"}),e.jsx("button",{className:"memory-defrag__btn",onClick:()=>n(!1),"aria-label":"Close",children:"âœ•"})]})]}),e.jsx("div",{className:"memory-defrag__grid",children:i.map((r,a)=>e.jsx("div",{className:`memory-defrag__block memory-defrag__block--${r}`,title:r==="free"?"Free":`${x[r]||r} @ 0x${(a*4096).toString(16).toUpperCase()}`},a))}),e.jsx("div",{className:"memory-defrag__progress",children:e.jsx("div",{className:"memory-defrag__progress-bar",style:{width:`${g}%`}})}),e.jsxs("div",{className:"memory-defrag__status",children:[v," â€” ",g,"%"]}),e.jsxs("div",{className:"memory-defrag__legend",children:[c.map(r=>e.jsxs("div",{className:"memory-defrag__legend-item",children:[e.jsx("div",{className:`memory-defrag__legend-swatch memory-defrag__block--${r}`}),e.jsx("span",{children:x[r]})]},r)),e.jsxs("div",{className:"memory-defrag__legend-item",children:[e.jsx("div",{className:"memory-defrag__legend-swatch memory-defrag__block--free"}),e.jsx("span",{children:"Free"})]})]})]}):null}const b=s.memo(w);export{b as default};
