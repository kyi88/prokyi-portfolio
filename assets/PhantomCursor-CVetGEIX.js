import{a as e,j as I}from"./framer-motion-DjJR-6Ks.js";const x=typeof window<"u"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,R=6e4,M=["profile","career","goals","status","gadgets","links"];function k(){const o=[];for(const c of M){const u=document.getElementById(c);if(u){const n=u.getBoundingClientRect();o.push({x:n.left+n.width*(.2+Math.random()*.6),y:n.top+window.scrollY+n.height*(.2+Math.random()*.6)})}}return o.push({x:window.innerWidth*.5,y:200},{x:window.innerWidth*.7,y:window.innerHeight*.5}),o}function A(){const[o,c]=e.useState(!1),u=e.useRef(null),n=e.useRef(null),i=e.useRef(null),d=e.useRef({x:0,y:0}),m=e.useRef({x:0,y:0}),f=e.useRef(0),a=e.useRef([]),p=e.useRef(!1),w=e.useCallback(()=>{p.current||(c(!1),clearTimeout(n.current),n.current=setTimeout(()=>c(!0),R))},[]);return e.useEffect(()=>{if(x)return;const s=["mousemove","keydown","scroll","touchstart","mousedown"];return s.forEach(r=>window.addEventListener(r,w,{passive:!0})),n.current=setTimeout(()=>c(!0),R),()=>{clearTimeout(n.current),s.forEach(r=>window.removeEventListener(r,w))}},[w]),e.useEffect(()=>{const s=()=>{p.current=!p.current,c(r=>!r)};return window.addEventListener("prokyi-phantom-toggle",s),()=>window.removeEventListener("prokyi-phantom-toggle",s)},[]),e.useEffect(()=>{if(!o||x){cancelAnimationFrame(i.current);return}if(a.current=k(),a.current.length===0)return;f.current=0;const s=window.scrollY,r=a.current[0];d.current={x:r.x,y:r.y-s},m.current={...d.current},g();function g(){f.current=(f.current+1)%a.current.length;const t=a.current[f.current];m.current={x:t.x,y:t.y-window.scrollY}}function h(){if(document.hidden){i.current=requestAnimationFrame(h);return}const t=d.current,l=m.current,E=.008;t.x+=(l.x-t.x)*E,t.y+=(l.y-t.y)*E;const y=u.current;y&&(y.style.left=`${t.x}px`,y.style.top=`${t.y}px`);const v=l.x-t.x,T=l.y-t.y;Math.abs(v)<20&&Math.abs(T)<20&&g(),i.current=requestAnimationFrame(h)}return i.current=requestAnimationFrame(h),()=>cancelAnimationFrame(i.current)},[o]),x?null:I.jsx("div",{ref:u,className:`phantom-cursor${o?" phantom-cursor--active":""}`,"aria-hidden":"true"})}const F=e.memo(A);export{F as default};
