import{a as n,j as t,m as H}from"./framer-motion-DjJR-6Ks.js";const C=Math.PI*2;function K(){const[i,y]=n.useState(!1),[k,v]=n.useState(99.9),[E,b]=n.useState(!1),[A,q]=n.useState(!1),j=n.useRef(null),g=n.useRef(null),l=n.useRef(99.9),r=n.useRef(!1),p=n.useRef(0),N=n.useRef(null),R=n.useRef(null);n.useEffect(()=>{const a=c=>{c.key==="Escape"&&i&&y(!1)},e=()=>y(c=>!c);return window.addEventListener("keydown",a),window.addEventListener("prokyi-quantum-toggle",e),()=>{window.removeEventListener("keydown",a),window.removeEventListener("prokyi-quantum-toggle",e)}},[i]),n.useEffect(()=>{if(!i)return;const a=j.current;if(!a)return;const e=a.getContext("2d"),c=window.devicePixelRatio||1,o=a.clientWidth,u=a.clientHeight;a.width=o*c,a.height=u*c,e.scale(c,c);let s=0;l.current=99.9,r.current=!1,v(99.9),b(!1);const M=()=>{s+=.02,e.clearRect(0,0,o,u),!r.current&&l.current>10&&(l.current=Math.max(10,l.current-.02),Math.floor(s*50)%50===0&&v(+l.current.toFixed(1)));const P=o*.3,L=u*.5,F=o*.7,O=u*.5,_=r.current?0:(100-l.current)*.15,I=Math.sin(s*2.3)*(10+_),D=Math.cos(s*1.8)*(8+_),G=-Math.sin(s*2.3)*(10+_),Q=-Math.cos(s*1.8)*(8+_),d=P+I,f=L+D,m=F+G,h=O+Q;e.beginPath(),e.moveTo(d,f);const U=o*.5,$=u*.5+Math.sin(s*3)*20;e.quadraticCurveTo(U,$,m,h),e.strokeStyle=r.current?"rgba(100,100,100,0.3)":`rgba(179,136,255,${.3+Math.sin(s*4)*.15})`,e.lineWidth=1.5,e.stroke();const S=e.createRadialGradient(d,f,0,d,f,20);S.addColorStop(0,r.current?"rgba(0,229,255,0.8)":`rgba(0,229,255,${.5+Math.sin(s*5)*.3})`),S.addColorStop(1,"transparent"),e.fillStyle=S,e.fillRect(d-20,f-20,40,40),e.beginPath(),e.arc(d,f,6,0,C),e.fillStyle="#0ff",e.fill();const w=e.createRadialGradient(m,h,0,m,h,20);if(w.addColorStop(0,r.current?"rgba(255,0,255,0.8)":`rgba(255,0,255,${.5+Math.sin(s*5+Math.PI)*.3})`),w.addColorStop(1,"transparent"),e.fillStyle=w,e.fillRect(m-20,h-20,40,40),e.beginPath(),e.arc(m,h,6,0,C),e.fillStyle="#f0f",e.fill(),e.font="10px monospace",e.fillStyle="#0ff",e.textAlign="center",e.fillText(r.current?"|0⟩":"|ψ⟩",d,f-14),e.fillStyle="#f0f",e.fillText(r.current?"|1⟩":"|ψ⟩",m,h-14),!r.current)for(let x=0;x<5;x++){const B=o*.3+Math.sin(s+x*1.3)*60,W=u*.2+Math.cos(s*.8+x*.9)*40+x*20;e.fillStyle=`rgba(179,136,255,${.2+Math.sin(s+x)*.1})`,e.font="8px monospace",e.fillText(Math.random()>.5?"0":"1",B,W)}g.current=requestAnimationFrame(M)};return g.current=requestAnimationFrame(M),()=>cancelAnimationFrame(g.current)},[i]);const T=n.useCallback(()=>{if(p.current++,clearTimeout(N.current),N.current=setTimeout(()=>{p.current=0},1500),p.current>=5){p.current=0,q(!0),clearTimeout(R.current),R.current=setTimeout(()=>{q(!1),r.current=!1,b(!1),l.current=99.9,v(99.9)},3e3);return}r.current||(r.current=!0,b(!0),v(0),l.current=0)},[]);return n.useEffect(()=>()=>{cancelAnimationFrame(g.current),clearTimeout(N.current),clearTimeout(R.current)},[]),n.useEffect(()=>{i||(cancelAnimationFrame(g.current),b(!1),v(99.9),q(!1),p.current=0)},[i]),i?t.jsxs(H.div,{className:"quantum-entangle",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Quantum Entanglement Visualizer","aria-modal":"true",children:[t.jsxs("div",{className:"quantum-entangle__header",children:[t.jsx("span",{children:"⚛️ QUANTUM ENTANGLEMENT LAB"}),t.jsx("button",{className:"quantum-entangle__btn",onClick:()=>y(!1),"aria-label":"Close",children:"✕"})]}),t.jsx("canvas",{ref:j,className:"quantum-entangle__canvas",onClick:T,role:"button",tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),T())},"aria-label":"Observe quantum state"}),t.jsxs("div",{className:"quantum-entangle__stats",children:[t.jsxs("div",{className:"quantum-entangle__stat",children:[t.jsx("div",{className:"quantum-entangle__stat-label",children:"Coherence"}),t.jsxs("div",{className:"quantum-entangle__stat-value",children:[k.toFixed(1),"%"]})]}),t.jsxs("div",{className:"quantum-entangle__stat",children:[t.jsx("div",{className:"quantum-entangle__stat-label",children:"State"}),t.jsx("div",{className:"quantum-entangle__stat-value",children:E?"COLLAPSED":"ENTANGLED"})]}),t.jsxs("div",{className:"quantum-entangle__stat",children:[t.jsx("div",{className:"quantum-entangle__stat-label",children:"Bell Pair"}),t.jsx("div",{className:"quantum-entangle__stat-value",children:E?"|01⟩":"|Φ+⟩"})]})]}),A&&t.jsx("div",{className:"quantum-entangle__superposition",children:"✨ SUPERPOSITION ACHIEVED — Both states observed simultaneously ✨"}),t.jsx("div",{className:"quantum-entangle__status",children:E?"Wave function collapsed. Click rapidly (5x) to achieve superposition.":"Click the qubits to observe and collapse the wave function."})]}):null}const z=n.memo(K);export{z as default};
