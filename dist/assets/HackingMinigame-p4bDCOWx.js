import{a as e,j as t,m as w}from"./framer-motion-DjJR-6Ks.js";const i="PROKYI539",C="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%&*",A=60;function S(){const[l,f]=e.useState(!1),[d,h]=e.useState(!1),[R,_]=e.useState("_________"),[k,p]=e.useState([]),[v,g]=e.useState([]),[o,E]=e.useState(!1),u=e.useRef(null),m=e.useRef(null);e.useEffect(()=>{const s=r=>{r.key==="Escape"&&l&&f(!1)},n=()=>f(r=>!r);return window.addEventListener("keydown",s),window.addEventListener("prokyi-hackgame-toggle",n),()=>{window.removeEventListener("keydown",s),window.removeEventListener("prokyi-hackgame-toggle",n)}},[l]),e.useEffect(()=>()=>clearInterval(u.current),[]),e.useEffect(()=>{l||(clearInterval(u.current),h(!1),_("_________"),p([]),g([]),E(!1))},[l]),e.useEffect(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[v]);const x=e.useCallback(()=>{if(d||o)return;h(!0),g([`[${new Date().toLocaleTimeString("ja-JP")}] Brute force started...`]);const s=Array(i.length).fill(!1);let n=0;u.current=setInterval(()=>{n++;const r=s.map((a,c)=>a?-1:c).filter(a=>a>=0);if(r.length===0){clearInterval(u.current),h(!1),E(!0),_(i),g(a=>[...a,`[OK] Password cracked: ${i}`,`[OK] Total iterations: ${n}`]),window.dispatchEvent(new CustomEvent("prokyi-achievement",{detail:"MASTER HACKER"}));return}if(Math.random()<.05||n>100){const a=r[Math.floor(Math.random()*r.length)];s[a]=!0,p([...s]),g(c=>[...c,`[HIT] Position ${a}: '${i[a]}' found (${n} tries)`])}const j=s.map((a,c)=>a?i[c]:C[Math.floor(Math.random()*C.length)]).join("");_(j)},A)},[d,o]);if(!l)return null;const y=k.filter(Boolean).length/i.length*100;return t.jsxs(w.div,{className:"hacking-game",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Hacking Minigame","aria-modal":"true",children:[t.jsxs("div",{className:"hacking-game__header",children:[t.jsx("span",{children:"ðŸ”“ PASSWORD CRACKER v1.0"}),t.jsxs("div",{style:{display:"flex",gap:6},children:[!d&&!o&&t.jsx("button",{className:"hacking-game__btn",onClick:x,children:"â–¶ CRACK"}),t.jsx("button",{className:"hacking-game__btn",onClick:()=>f(!1),"aria-label":"Close",children:"âœ•"})]})]}),t.jsx("div",{className:"hacking-game__display",children:R}),t.jsx("div",{className:"hacking-game__progress",children:t.jsx("div",{className:"hacking-game__progress-bar",style:{width:`${y}%`}})}),t.jsx("div",{className:"hacking-game__log",ref:m,children:v.map((s,n)=>t.jsx("div",{children:s},n))}),t.jsx("div",{className:`hacking-game__status${o?" hacking-game__status--success":""}`,children:o?"âœ… ACCESS GRANTED â€” Welcome, prokyi.":d?`Cracking... ${k.filter(Boolean).length}/${i.length}`:"Press â–¶ CRACK to begin brute force"})]})}const T=e.memo(S);export{T as default};
