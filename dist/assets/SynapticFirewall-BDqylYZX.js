import{a as l,j as e,m as D}from"./framer-motion-DjJR-6Ks.js";const C=12,T=["Î±","Î²","Î³","Î´","Îµ","Î¶","Î·","Î¸","Î¹","Îº","Î»","Î¼"];function j(){return Array.from({length:C},(r,c)=>({id:c,label:T[c],state:"safe"}))}function F(){const[r,c]=l.useState(!1),[k,d]=l.useState(j),[i,h]=l.useState(!1),[u,v]=l.useState(0),[N,g]=l.useState(0),[p,f]=l.useState(null),[m,w]=l.useState(!1),_=l.useRef(null),y=l.useRef(!1);l.useEffect(()=>{const a=t=>{t.key==="Escape"&&r&&c(!1)},s=()=>c(t=>!t);return window.addEventListener("keydown",a),window.addEventListener("prokyi-firewall-toggle",s),()=>{window.removeEventListener("keydown",a),window.removeEventListener("prokyi-firewall-toggle",s)}},[r]),l.useEffect(()=>()=>{clearInterval(_.current),y.current=!1},[]),l.useEffect(()=>{r||(clearInterval(_.current),y.current=!1,d(j()),h(!1),v(0),g(0),f(null),w(!1))},[r]);const E=l.useCallback(a=>{i&&d(s=>{const t=[...s];return t[a].state==="safe"&&a===p&&(t[a]={...t[a],state:"blocked"},v(n=>n+1),f(null)),t})},[i,p]),S=l.useCallback(()=>{i||(h(!0),y.current=!0,d(j()),v(0),g(0),f(null),w(!1),_.current=setInterval(()=>{d(a=>{const s=a.map((n,o)=>n.state==="safe"?o:-1).filter(n=>n>=0);if(s.length===0)return clearInterval(_.current),h(!1),w(!0),a;const t=s[Math.floor(Math.random()*s.length)];return f(t),setTimeout(()=>{y.current&&(d(n=>{if(n[t].state==="safe"){const o=[...n];return o[t]={...o[t],state:"infected"},g(R=>{const L=R+1;return o.filter(A=>A.state==="safe").length===0&&(clearInterval(_.current),h(!1),w(!0)),L}),o}return n}),f(null))},1500),a})},2e3))},[i]);if(!r)return null;const I=C,x=k.filter(a=>a.state==="safe").length,b=u+N>0?Math.round(u/(u+N)*100):100;return e.jsxs(D.div,{className:"synaptic-firewall",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Synaptic Firewall","aria-modal":"true",children:[e.jsxs("div",{className:"synaptic-firewall__header",children:[e.jsx("span",{children:"ðŸ§  SYNAPTIC FIREWALL"}),e.jsxs("div",{style:{display:"flex",gap:6},children:[!i&&!m&&e.jsx("button",{className:"synaptic-firewall__btn",onClick:S,children:"â–¶ DEFEND"}),(m||!i&&(u>0||N>0))&&e.jsx("button",{className:"synaptic-firewall__btn",onClick:S,children:"â†» RETRY"}),e.jsx("button",{className:"synaptic-firewall__btn",onClick:()=>c(!1),"aria-label":"Close",children:"âœ•"})]})]}),e.jsx("div",{className:"synaptic-firewall__grid",children:k.map((a,s)=>e.jsx("div",{className:`synaptic-firewall__node synaptic-firewall__node--${a.state}${p===s?" synaptic-firewall__node--target":""}`,onClick:()=>E(s),onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),E(s))},role:"button",tabIndex:0,"aria-label":`Node ${a.label}: ${a.state}${p===s?" â€” under attack!":""}`,children:a.label},a.id))}),e.jsxs("div",{className:"synaptic-firewall__hud",children:[e.jsxs("div",{className:"synaptic-firewall__hud-item",children:[e.jsx("div",{className:"synaptic-firewall__hud-label",children:"Block Rate"}),e.jsxs("div",{className:`synaptic-firewall__hud-value ${b>=70?"synaptic-firewall__hud-value--good":b>=40?"synaptic-firewall__hud-value--warn":"synaptic-firewall__hud-value--bad"}`,children:[b,"%"]})]}),e.jsxs("div",{className:"synaptic-firewall__hud-item",children:[e.jsx("div",{className:"synaptic-firewall__hud-label",children:"Safe Nodes"}),e.jsxs("div",{className:`synaptic-firewall__hud-value ${x>6?"synaptic-firewall__hud-value--good":x>3?"synaptic-firewall__hud-value--warn":"synaptic-firewall__hud-value--bad"}`,children:[x,"/",I]})]}),e.jsxs("div",{className:"synaptic-firewall__hud-item",children:[e.jsx("div",{className:"synaptic-firewall__hud-label",children:"Blocked"}),e.jsx("div",{className:"synaptic-firewall__hud-value synaptic-firewall__hud-value--good",children:u})]})]}),m&&e.jsx("div",{className:"synaptic-firewall__compromised",children:"âš  NEURAL FIREWALL COMPROMISED â€” INITIATING CONSCIOUSNESS BACKUP..."}),e.jsx("div",{className:"synaptic-firewall__status",children:i?"Click glowing nodes to block incoming threats!":m?"All nodes infected. Try again.":"Press â–¶ DEFEND to start"})]})}const B=l.memo(F);export{B as default};
