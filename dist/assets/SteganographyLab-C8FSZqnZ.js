import{a,j as t,m as D}from"./framer-motion-DjJR-6Ks.js";const y=[{emoji:"ðŸ§",hidden:"I use Arch btw (å˜˜ã€Ubuntuæ´¾)"},{emoji:"ðŸ£",hidden:"prokyi's secret sushi recipe: sudo rm -rf /hunger"},{emoji:"ðŸŽ®",hidden:"AYN Thor MAX > Nintendo Switch (å€‹äººã®æ„Ÿæƒ³)"},{emoji:"ðŸ¤–",hidden:"AI will not replace prokyi. prokyi IS the AI."}],f=128,A=Array.from({length:f},()=>({r:30,g:30,b:30,hasBit:!1}));function N(s){return Array.from(new TextEncoder().encode(s)).map(r=>r.toString(2).padStart(8,"0")).join("")}function S(s){const r=[];for(let n=0;n+8<=s.length;n+=8)r.push(parseInt(s.slice(n,n+8),2));try{return new TextDecoder().decode(new Uint8Array(r))}catch{return"???"}}function k(s){const r=[];for(let n=0;n<f;n++){const i=Math.floor(Math.random()*100+50),d=n<s.length?Number(s[n]):0,m=i&254|d,c=Math.floor(Math.random()*60+100),b=Math.floor(Math.random()*80+60);r.push({r:m,g:c,b,hasBit:n<s.length})}return r}function C(){const[s,r]=a.useState(!1),[n,i]=a.useState("encode"),[d,m]=a.useState(""),[c,b]=a.useState([]),[x,u]=a.useState(""),[h,p]=a.useState(""),[w,E]=a.useState(null),g=a.useRef(null);a.useEffect(()=>{const e=l=>{l.key==="Escape"&&s&&r(!1)},o=()=>r(l=>!l);return window.addEventListener("keydown",e),window.addEventListener("prokyi-stegano-toggle",o),()=>{window.removeEventListener("keydown",e),window.removeEventListener("prokyi-stegano-toggle",o)}},[s]),a.useEffect(()=>()=>clearInterval(g.current),[]),a.useEffect(()=>{s||(clearInterval(g.current),m(""),b([]),u(""),p(""),E(null),i("encode"))},[s]);const j=a.useCallback(()=>{if(!d.trim())return;const e=N(d);p(e),b(k(e)),u("")},[d]),v=a.useCallback(e=>{clearInterval(g.current);const o=y[e];E(e),i("decode");const l=N(o.hidden);p(l),b(k(l)),u("");let _=0;g.current=setInterval(()=>{if(_+=2,_>=l.length){clearInterval(g.current),u(o.hidden);return}u(S(l.slice(0,_)))},30)},[]),I=a.useCallback(()=>{if(c.length===0)return;const e=c.map(l=>l.r&1).join(""),o=e.slice(0,h.length||e.length);u(S(o))},[c,h]);return s?t.jsxs(D.div,{className:"stegano-lab",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Steganography Lab","aria-modal":"true",children:[t.jsxs("div",{className:"stegano-lab__header",children:[t.jsx("span",{children:"ðŸ”’ STEGANOGRAPHY LAB"}),t.jsx("button",{className:"stegano-lab__btn",onClick:()=>r(!1),"aria-label":"Close",children:"âœ•"})]}),t.jsxs("div",{className:"stegano-lab__body",children:[t.jsxs("div",{className:"stegano-lab__modes",children:[t.jsx("button",{className:`stegano-lab__btn${n==="encode"?" stegano-lab__btn--active":""}`,onClick:()=>i("encode"),children:"ENCODE"}),t.jsx("button",{className:`stegano-lab__btn${n==="decode"?" stegano-lab__btn--active":""}`,onClick:()=>i("decode"),children:"DECODE"})]}),n==="decode"&&t.jsx("div",{className:"stegano-lab__presets",children:y.map((e,o)=>t.jsx("span",{className:"stegano-lab__preset",onClick:()=>v(o),role:"button",tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),v(o))},"aria-label":`Decode preset ${o+1}`,children:e.emoji},o))}),n==="encode"&&t.jsxs(t.Fragment,{children:[t.jsx("input",{className:"stegano-lab__input",placeholder:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>e.key==="Enter"&&j(),"aria-label":"Message to encode"}),t.jsx("button",{className:"stegano-lab__btn",onClick:j,style:{marginBottom:8},children:"â–¶ EMBED IN PIXELS"})]}),n==="decode"&&c.length>0&&w===null&&t.jsx("button",{className:"stegano-lab__btn",onClick:I,style:{marginBottom:8},children:"ðŸ” EXTRACT HIDDEN DATA"}),t.jsx("div",{className:"stegano-lab__grid",children:(c.length>0?c:A).map((e,o)=>t.jsx("div",{className:"stegano-lab__pixel",style:{background:`rgb(${e.r},${e.g},${e.b})`,boxShadow:e.hasBit?"0 0 2px rgba(0,229,255,0.4)":"none"}},o))}),x&&t.jsxs("div",{className:"stegano-lab__output",children:["> ",x]}),h&&t.jsxs("div",{className:"stegano-lab__bits",children:["LSB: ",h.slice(0,64),h.length>64?"â€¦":""]}),t.jsx("div",{className:"stegano-lab__status",children:c.length>0?`${f} pixels | ${h.length} bits embedded`:"Select a preset to decode or switch to ENCODE mode"})]})]}):null}const B=a.memo(C);export{B as default};
