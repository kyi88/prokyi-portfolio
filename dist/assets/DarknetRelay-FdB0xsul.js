import{a as t,j as e,m as M}from"./framer-motion-DjJR-6Ks.js";const n=["AES-256-GCM","ChaCha20-Poly1305","Camellia-256-CBC","Twofish-256"],h=()=>`${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,y=()=>Math.floor(30+Math.random()*200);function m(){return[{type:"entry",label:"ENTRY",ip:h(),cipher:n[Math.floor(Math.random()*n.length)],latency:y()},{type:"middle",label:"RELAY-1",ip:h(),cipher:n[Math.floor(Math.random()*n.length)],latency:y()},{type:"middle",label:"RELAY-2",ip:h(),cipher:n[Math.floor(Math.random()*n.length)],latency:y()},{type:"exit",label:"EXIT",ip:h(),cipher:n[Math.floor(Math.random()*n.length)],latency:y()}]}function R(){const[l,f]=t.useState(!1),[i,p]=t.useState(()=>m()),[d,u]=t.useState(null),[k,C]=t.useState(!1),[_,T]=t.useState(0),o=t.useRef(0),E=t.useRef(null),x=t.useRef(null);t.useEffect(()=>{const a=s=>{s.key==="Escape"&&l&&f(!1)},r=()=>f(s=>!s);return window.addEventListener("keydown",a),window.addEventListener("prokyi-darknet-toggle",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("prokyi-darknet-toggle",r)}},[l]),t.useEffect(()=>{if(!l)return;const a=setInterval(()=>T(r=>r+Math.floor(1+Math.random()*5)),800);return()=>clearInterval(a)},[l]),t.useEffect(()=>()=>{clearTimeout(E.current),clearTimeout(x.current)},[]),t.useEffect(()=>{l||(p(m()),u(null),C(!1),T(0),o.current=0)},[l]);const v=t.useCallback(a=>{const r=i[a];u(a===d?null:a),r.type==="exit"&&(o.current++,clearTimeout(E.current),E.current=setTimeout(()=>{o.current=0},2e3),o.current>=3&&(o.current=0,C(!0),clearTimeout(x.current),x.current=setTimeout(()=>{p(m()),C(!1),u(null)},3e3)))},[i,d]),I=t.useCallback(()=>{p(m()),u(null)},[]);if(!l)return null;const c=d!==null?i[d]:null;return e.jsxs(M.div,{className:"darknet-relay",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.15},role:"dialog","aria-label":"Darknet Relay","aria-modal":"true",children:[e.jsxs("div",{className:"darknet-relay__header",children:[e.jsx("span",{children:"ğŸ§… DARKNET RELAY â€” TOR CIRCUIT"}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"darknet-relay__btn",onClick:I,children:"âŸ³ NEW CIRCUIT"}),e.jsx("button",{className:"darknet-relay__btn",onClick:()=>f(!1),"aria-label":"Close",children:"âœ•"})]})]}),e.jsx("div",{className:"darknet-relay__chain",children:i.map((a,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsxs("div",{className:`darknet-relay__node darknet-relay__node--${a.type}${k?" darknet-relay__node--alert":""}`,onClick:()=>v(r),onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),v(r))},role:"button",tabIndex:0,"aria-label":`${a.label} node`,children:[e.jsx("div",{style:{fontSize:"0.7rem"},children:a.type==="entry"?"ğŸŸ¢":a.type==="exit"?"ğŸ”´":"ğŸŸ¡"}),e.jsx("div",{children:a.label})]}),r<i.length-1&&e.jsx("span",{className:"darknet-relay__arrow",children:"â†’"})]},r))}),c&&e.jsxs("div",{className:"darknet-relay__detail",children:["IP: ",c.ip," | Cipher: ",c.cipher," | Latency: ",c.latency,"ms | Type: ",c.type.toUpperCase()]}),e.jsx("div",{className:`darknet-relay__status${k?" darknet-relay__status--alert":""}`,children:k?"âš  IDENTITY EXPOSED â€” REBUILDING CIRCUIT...":"CIRCUIT ESTABLISHED â€” ALL LAYERS ENCRYPTED"}),e.jsxs("div",{className:"darknet-relay__counter",children:["Packets relayed: ",_," | Bandwidth: ",(_*.42).toFixed(1)," KB"]})]})}const j=t.memo(R);export{j as default};
